<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stillF&nbsp;-&nbsp;線上編輯器</title>
    <link rel="stylesheet" type="text/css" href="/EditHtml/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/EditHtml/css/fontawesome-all.css">
    <link rel="stylesheet" type="text/css" href="/EditHtml/css/toastr.min.css">
    <script type="text/javascript" src="/EditHtml/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="/EditHtml/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/EditHtml/ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="/EditHtml/js/toastr.min.js"></script>
</head>
<body>
    <header>
        <nav class="navbar navbar-inverse navbar-static-top" role="Navigation">
            <div class="container" style="width:100%">
                <div class="navbar-header">
                    <a href="https://stillf.github.io/" class="navbar-brand" style="color:#ffffff;margin-left:10px;" target="_blank">stillF&ensp;信柴柴，得第一</a>
                </div>
            </div>
        </nav>
    </header>

    <div class="container" style="width:100%">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div style="color:#333;font-size:22px;font-weight:bold;">
                Html線上編輯器
                <a href="https://github.com/stillF/EditHtml" style="margin-left:5px;" target="_blank"><i class="fas fa-link"></i></a>
            </div>
            <hr>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    編輯區                    
                </div>
                <div class="panel-body">
                    <ul class="nav nav-tabs" id="edit_nav">
                        <li class="active"><a data-toggle="tab" href="#edit1">HTML</a></li>
                        <li><a data-toggle="tab" href="#edit2">JS</a></li>
                        <li><a data-toggle="tab" href="#edit3">CSS</a></li>
                    </ul>
                    <div class="tab-content" style="margin:10px;">
                        <div id="edit1" class="tab-pane fade in active">
                            <button type="button" class="btn btn-success btn-xs" style="margin-bottom:10px;" onclick="copy_html()">複製</button>
                            <button type="button" class="btn btn-danger btn-xs" style="margin-bottom:10px;margin-left:7px;" onclick="clean_html()">清除</button>
                            <textarea class="form-control" rows="20" id="html_textarea"></textarea>
                        </div>
                        <div id="edit2" class="tab-pane fade">
                            <button type="button" class="btn btn-success btn-xs" style="margin-bottom:10px;" onclick="copy_js()">複製</button>
                            <button type="button" class="btn btn-danger btn-xs" style="margin-bottom:10px;margin-left:7px;" onclick="clean_js()">清除</button>
                            <textarea class="form-control" rows="20" id="js_textarea"></textarea>
                        </div>
                        <div id="edit3" class="tab-pane fade">
                            <button type="button" class="btn btn-success btn-xs" style="margin-bottom:10px;" onclick="copy_css()">複製</button>
                            <button type="button" class="btn btn-danger btn-xs" style="margin-bottom:10px;margin-left:7px;" onclick="clean_css()">清除</button>
                            <textarea class="form-control" rows="20" id="css_textarea"></textarea>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary btn-block" style="margin-top:15px;" onclick="edit_submit()">送出</button>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    顯示區
                </div>
                <div class="panel-body">
                    <iframe style="height:500px;width:100%;" id="edit_iframe"></iframe>
                    <button type="button" class="btn btn-primary btn-block" style="margin-top:15px;" onclick="return_edit()">返回-編輯區</button>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    CKEditor
                </div>
                <div class="panel-body">
                  <textarea id="editor1" name="editor1"></textarea>
                </div>
            </div>
        </div>
    </div>

    <footer class="navbar-inverse">
        <div class="container-fluid text-center">
            <p class="text-muted" style="margin-top:10px;color:#ffffff">© Copyright 2019. All Rights Reserved.</p>
        </div>
    </footer>

    <script type="text/javascript">

    $(document).ready(function () {
	    CKEDITOR.replace('editor1', {
		    width: '100%',
		    height: '400px',
		    toolbarGroups: [{
				    name: 'document',
				    groups: ['mode', 'document', 'doctools']
			    }, {
				    name: 'clipboard',
				    groups: ['clipboard', 'undo']
			    }, {
				    name: 'editing',
				    groups: ['find', 'selection', 'spellchecker']
			    }, {
				    name: 'forms'
			    }, '/', {
				    name: 'basicstyles',
				    groups: ['basicstyles', 'cleanup']
			    }, {
				    name: 'paragraph',
				    groups: ['list', 'indent', 'blocks', 'align', 'bidi']
			    }, {
				    name: 'links'
			    }, {
				    name: 'insert'
			    }, '/', {
				    name: 'styles'
			    }, {
				    name: 'colors'
			    }, {
				    name: 'tools'
			    }, {
				    name: 'others'
			    }, {
				    name: 'Youtube'
			    }, {
				    name: 'about'
			    }
		    ]
	    });
	
        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": false,
            "progressBar": false,
            "positionClass": "toast-bottom-full-width",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "3000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
    });

    function edit_submit() {
        
	    var _html =
		    "<!DOCTYPE html>" +
		    "<html>" +
		    "<head>" +
		    "<meta charset='utf-8'>" +
		    "<meta name='viewport' content='width=device-width, initial-scale=1.0'>" +
		    "<title>stillF</title>" +
		    "<link rel='stylesheet' type='text/css' href='/css/bootstrap.min.css'>" +
		    "<link rel='stylesheet' type='text/css' href='/css/fontawesome-all.css'>" +
		    "<script type='text/javascript' src='/js/jquery-3.3.1.min.js'><\/script>" +
		    "<script type='text/javascript' src='/js/bootstrap.min.js'><\/script>" +
		    "<style type='text/css'>" + $('#css_textarea').val() + "</style>" +
		    "<script type='text/javascript'>" + $('#js_textarea').val() + "<\/script>" +
		    "</head>" +
		    "<body>" +
		    "<div class='container' style='width:100%'>" +
		    "<div class='col-xs-12 col-sm-12 col-md-12 col-lg-12'>" +
		    "<div class='row' style='margin-top:20px;'>" + $('#html_textarea').val() + "</div>" +
		    "</div>" +
		    "</div>" +
		    "</body>" +
		    "</html>";
	
	    var s = document.getElementById("edit_iframe");
	    s.contentDocument.open();
	    s.contentDocument.write(_html);
	    s.contentDocument.close();
	
	    $("html, body").animate({
		    scrollTop: $("#edit_iframe").offset().top - 5
	    }, 700);
    }

    function return_edit() {
	    $("html, body").animate({
		    scrollTop: $("#edit_nav").offset().top - 5
	    }, 700);
    }

    function copy_html() {
	    var html_textarea = document.getElementById("html_textarea");
	    html_textarea.select();
	    document.execCommand("Copy");
	    toastr.success("複製成功");
    }

    function clean_html() {
	    if (confirm("確定要清除?")) {
		    $("#html_textarea").val("");
	    }
    }

    function copy_js() {
	    var js_textarea = document.getElementById("js_textarea");
	    js_textarea.select();
        document.execCommand("Copy");
        toastr.success("複製成功");
    }

    function clean_js() {
	    if (confirm("確定要清除?")) {
		    $("#js_textarea").val("");
	    }
    }

    function copy_css() {
	    var css_textarea = document.getElementById("css_textarea");
	    css_textarea.select();
        document.execCommand("Copy");
        toastr.success("複製成功");
    }

    function clean_css() {
	    if (confirm("確定要清除?")) {
		    $("#css_textarea").val("");
	    }
    }

    </script>
</body>
</html>
